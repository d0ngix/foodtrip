<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script type="text/javascript">
	var setHeadline = function(text){
		//headline.text(text);
		return "test123";
	}
	
	var myFunc = {
		'setHeadline' : function (text) {
			console.log(text);
              //  headline.text(text);
			return 'shit';
		},
		'callNative' : function (){
			var prop = selection.val();
			set_headline("asked for " + prop + "...");
			console.log(set_headline("prop"))
			window.webkit.messageHandlers.observe.postMessage(prop);
		}
	};
	
	
        $(function () {
            var headline = $("#headline");
            var selection = $("#selector");
			var set_headline = function (text) {
				console.log(text);
                headline.text(text);
				return 'shit';
            }

            function call_native () {
                var prop = selection.val();
               set_headline("asked for " + prop + "...");
               console.log(set_headline("prop"))
//               window.webkit.messageHandlers.observe.postMessage(prop);
            }

            setTimeout(call_native, 1000);

            selection.on("change", call_native);

            // Expose that function globally
            window.call_native = call_native;
        });

    </script>
</head>
<body>

</body>
</html>